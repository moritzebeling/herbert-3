var app=function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode.removeChild(t)}function a(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d(" ")}function p(){return d("")}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function g(t,n){n=""+n,t.data!==n&&(t.data=n)}function $(t,n,e){t.classList[e?"add":"remove"](n)}let b;function w(t){b=t}function y(){if(!b)throw new Error("Function called outside component initialization");return b}function v(t){y().$$.after_update.push(t)}const x=[],_=[],E=[],j=[],N=Promise.resolve();let k=!1;function O(t){E.push(t)}let A=!1;const B=new Set;function C(){if(!A){A=!0;do{for(let t=0;t<x.length;t+=1){const n=x[t];w(n),F(n.$$)}for(x.length=0;_.length;)_.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];B.has(n)||(B.add(n),n())}E.length=0}while(x.length);for(;j.length;)j.pop()();k=!1,A=!1,B.clear()}}function F(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(O)}}const L=new Set;let z;function M(){z={r:0,c:[],p:z}}function S(){z.r||o(z.c),z=z.p}function q(t,n){t&&t.i&&(L.delete(t),t.i(n))}function H(t,n,e,r){if(t&&t.o){if(L.has(t))return;L.add(t),z.c.push(()=>{L.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}function I(t,n){const e={},r={},o={$$scope:1};let i=t.length;for(;i--;){const c=t[i],l=n[i];if(l){for(const t in c)t in l||(r[t]=1);for(const t in l)o[t]||(e[t]=l[t],o[t]=1);t[i]=l}else for(const t in c)o[t]=1}for(const t in r)t in e||(e[t]=void 0);return e}function P(t){return"object"==typeof t&&null!==t?t:{}}function T(t){t&&t.c()}function W(t,n,r){const{fragment:c,on_mount:l,on_destroy:s,after_update:u}=t.$$;c&&c.m(n,r),O(()=>{const n=l.map(e).filter(i);s?s.push(...n):o(n),t.$$.on_mount=[]}),u.forEach(O)}function D(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function G(t,n){-1===t.$$.dirty[0]&&(x.push(t),k||(k=!0,N.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function J(n,e,i,c,l,s,a=[-1]){const f=b;w(n);const d=e.props||{},h=n.$$={fragment:null,ctx:null,props:s,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:r(),dirty:a};let p=!1;if(h.ctx=i?i(n,d,(t,e,...r)=>{const o=r.length?r[0]:e;return h.ctx&&l(h.ctx[t],h.ctx[t]=o)&&(h.bound[t]&&h.bound[t](o),p&&G(n,t)),e}):[],h.update(),p=!0,o(h.before_update),h.fragment=!!c&&c(h.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();e.intro&&q(n.$$.fragment),W(n,e.target,e.anchor),C()}w(f)}class K{$destroy(){D(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const Q=[];function R(n,e=t){let r;const o=[];function i(t){if(c(n,t)&&(n=t,r)){const t=!Q.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),Q.push(e,n)}if(t){for(let t=0;t<Q.length;t+=2)Q[t][0](Q[t+1]);Q.length=0}}}return{set:i,update:function(t){i(t(n))},subscribe:function(c,l=t){const s=[c,l];return o.push(s),1===o.length&&(r=e(i)||t),c(n),()=>{const t=o.indexOf(s);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function U(t=function(){let t=window.location.pathname;"/"===t&&(t="home");let n=t+".json";return""!==window.location.search&&(n+=window.location.search),n}()){return{subscribe:R({},n=>(n(async function(t,n){try{console.log("fetch "+t);const e=window.location.origin+"/"+t,r=await fetch(e);if(200===r.status){const t=await r.json();return n(t),t}{const t=r.text();throw new Error(t)}}catch(t){return data.error=t,n(data),data}}(t,n)),()=>{})).subscribe}}function V(n){let e,r,o,i;return{c(){e=f("div"),r=h(),o=f("img"),m(o,"alt",n[1]),m(o,"width",n[0]),m(o,"height",n[5]),m(o,"class","lazyload"),o.src!==(i=n[2])&&m(o,"src",i),m(o,"data-src",n[3]),m(o,"data-srcset",n[4])},m(t,i){s(t,e,i),n[8](e),s(t,r,i),s(t,o,i)},p(t,[n]){2&n&&m(o,"alt",t[1]),1&n&&m(o,"width",t[0]),32&n&&m(o,"height",t[5]),4&n&&o.src!==(i=t[2])&&m(o,"src",i),8&n&&m(o,"data-src",t[3]),16&n&&m(o,"data-srcset",t[4])},i:t,o:t,d(t){t&&u(e),n[8](null),t&&u(r),t&&u(o)}}}function X(t,n,e){let r,{alt:o="Herbert.gd"}=n,{placeholder:i=""}=n,{src:c=""}=n,{srcset:l=""}=n,{ratio:s=1}=n,{width:u="100%"}=n,a="10vw";var f;return f=()=>{e(0,u=r.offsetWidth),e(5,a=Math.floor(u*s))},y().$$.on_mount.push(f),t.$set=t=>{"alt"in t&&e(1,o=t.alt),"placeholder"in t&&e(2,i=t.placeholder),"src"in t&&e(3,c=t.src),"srcset"in t&&e(4,l=t.srcset),"ratio"in t&&e(7,s=t.ratio),"width"in t&&e(0,u=t.width)},[u,o,i,c,l,a,r,s,function(t){_[t?"unshift":"push"](()=>{r=t,e(6,r)})}]}class Y extends K{constructor(t){super(),J(this,t,X,V,c,{alt:1,placeholder:2,src:3,srcset:4,ratio:7,width:0})}}function Z(t){let e,r,o;const i=[t[0].image];let c={};for(let t=0;t<i.length;t+=1)c=n(c,i[t]);return r=new Y({props:c}),{c(){e=f("figure"),T(r.$$.fragment),m(e,"class","video")},m(t,n){s(t,e,n),W(r,e,null),o=!0},p(t,n){const e=1&n?I(i,[P(t[0].image)]):{};r.$set(e)},i(t){o||(q(r.$$.fragment,t),o=!0)},o(t){H(r.$$.fragment,t),o=!1},d(t){t&&u(e),D(r)}}}function tt(t){let n,e,r,o,i,c,a,p,b,w,y,v,x=t[0].title+"",_=t[0].subtitle+"",E="image"in t[0]&&Z(t);return{c(){n=f("li"),e=f("a"),E&&E.c(),r=h(),o=f("div"),i=f("h3"),c=d(x),a=h(),p=f("h4"),b=d(_),m(o,"class","title"),m(e,"href",w=t[0].href),m(n,"class",y="item "+t[2]),$(n,"hide",!t[1])},m(t,u){s(t,n,u),l(n,e),E&&E.m(e,null),l(e,r),l(e,o),l(o,i),l(i,c),l(o,a),l(o,p),l(p,b),v=!0},p(t,[o]){"image"in t[0]?E?(E.p(t,o),1&o&&q(E,1)):(E=Z(t),E.c(),q(E,1),E.m(e,r)):E&&(M(),H(E,1,1,()=>{E=null}),S()),(!v||1&o)&&x!==(x=t[0].title+"")&&g(c,x),(!v||1&o)&&_!==(_=t[0].subtitle+"")&&g(b,_),(!v||1&o&&w!==(w=t[0].href))&&m(e,"href",w),(!v||4&o&&y!==(y="item "+t[2]))&&m(n,"class",y),6&o&&$(n,"hide",!t[1])},i(t){v||(q(E),v=!0)},o(t){H(E),v=!1},d(t){t&&u(n),E&&E.d()}}}function nt(t,n,e){let{item:r={}}=n,{filter:o=!1}=n,i=!0;v(()=>{e(1,i=!1===o||r.categories.includes(o))});let c="";return"image"in r&&"ratio"in r.image&&(c=r.image.ratio<1?"landscape":"portrait"),t.$set=t=>{"item"in t&&e(0,r=t.item),"filter"in t&&e(3,o=t.filter)},[r,i,c,o]}class et extends K{constructor(t){super(),J(this,t,nt,tt,c,{item:0,filter:3})}}function rt(t){let e,r,o;const i=[t[0].image];let c={};for(let t=0;t<i.length;t+=1)c=n(c,i[t]);return r=new Y({props:c}),{c(){e=f("figure"),T(r.$$.fragment),m(e,"class","video")},m(t,n){s(t,e,n),W(r,e,null),o=!0},p(t,n){const e=1&n?I(i,[P(t[0].image)]):{};r.$set(e)},i(t){o||(q(r.$$.fragment,t),o=!0)},o(t){H(r.$$.fragment,t),o=!1},d(t){t&&u(e),D(r)}}}function ot(t){let n,e,r,o,i,c,a,p,b,w,y,v,x=t[0].title+"",_=t[0].subtitle+"",E="image"in t[0]&&rt(t);return{c(){n=f("li"),e=f("a"),r=f("div"),o=f("h3"),i=d(x),c=h(),a=f("h4"),p=d(_),b=h(),E&&E.c(),m(r,"class","title"),m(e,"href",w=t[0].href),m(n,"class",y="item "+t[2]),$(n,"hide",!t[1])},m(t,u){s(t,n,u),l(n,e),l(e,r),l(r,o),l(o,i),l(r,c),l(r,a),l(a,p),l(e,b),E&&E.m(e,null),v=!0},p(t,[r]){(!v||1&r)&&x!==(x=t[0].title+"")&&g(i,x),(!v||1&r)&&_!==(_=t[0].subtitle+"")&&g(p,_),"image"in t[0]?E?(E.p(t,r),1&r&&q(E,1)):(E=rt(t),E.c(),q(E,1),E.m(e,null)):E&&(M(),H(E,1,1,()=>{E=null}),S()),(!v||1&r&&w!==(w=t[0].href))&&m(e,"href",w),(!v||4&r&&y!==(y="item "+t[2]))&&m(n,"class",y),6&r&&$(n,"hide",!t[1])},i(t){v||(q(E),v=!0)},o(t){H(E),v=!1},d(t){t&&u(n),E&&E.d()}}}function it(t,n,e){let{item:r={}}=n,{filter:o=!1}=n,i=!0;v(()=>{e(1,i=!1===o||r.categories.includes(o))});let c="";return"image"in r&&"ratio"in r.image&&(c=r.image.ratio<1?"landscape":"portrait"),t.$set=t=>{"item"in t&&e(0,r=t.item),"filter"in t&&e(3,o=t.filter)},[r,i,c,o]}class ct extends K{constructor(t){super(),J(this,t,it,ot,c,{item:0,filter:3})}}function lt(t,n,e){const r=t.slice();return r[7]=n[e],r}function st(t,n,e){const r=t.slice();return r[10]=n[e][0],r[11]=n[e][1],r}function ut(n){let e;return{c(){e=f("h3"),e.textContent="No posts found",m(e,"class","error")},m(t,n){s(t,e,n)},p:t,i:t,o:t,d(t){t&&u(e)}}}function at(t){let n,e,r,o,i,c,d=Object.entries(t[2]),p=[];for(let n=0;n<d.length;n+=1)p[n]=ft(st(t,d,n));let g=t[1],$=[];for(let n=0;n<g.length;n+=1)$[n]=dt(lt(t,g,n));const b=t=>H($[t],1,1,()=>{$[t]=null});return{c(){n=f("div"),e=f("ul");for(let t=0;t<p.length;t+=1)p[t].c();r=h(),o=f("ol");for(let t=0;t<$.length;t+=1)$[t].c();m(e,"class","keywords filters"),m(n,"class","result-options"),m(o,"class",i="container "+t[0])},m(t,i){s(t,n,i),l(n,e);for(let t=0;t<p.length;t+=1)p[t].m(e,null);s(t,r,i),s(t,o,i);for(let t=0;t<$.length;t+=1)$[t].m(o,null);c=!0},p(t,n){if(44&n){let r;for(d=Object.entries(t[2]),r=0;r<d.length;r+=1){const o=st(t,d,r);p[r]?p[r].p(o,n):(p[r]=ft(o),p[r].c(),p[r].m(e,null))}for(;r<p.length;r+=1)p[r].d(1);p.length=d.length}if(27&n){let e;for(g=t[1],e=0;e<g.length;e+=1){const r=lt(t,g,e);$[e]?($[e].p(r,n),q($[e],1)):($[e]=dt(r),$[e].c(),q($[e],1),$[e].m(o,null))}for(M(),e=g.length;e<$.length;e+=1)b(e);S()}(!c||1&n&&i!==(i="container "+t[0]))&&m(o,"class",i)},i(t){if(!c){for(let t=0;t<g.length;t+=1)q($[t]);c=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)H($[t]);c=!1},d(t){t&&u(n),a(p,t),t&&u(r),t&&u(o),a($,t)}}}function ft(t){let n,e,r,o,i,c,a,p,b,w=t[10]+"",y=t[11]+"";function v(...n){return t[6](t[10],...n)}return{c(){n=f("li"),e=f("button"),r=d(w),o=f("span"),i=d(y),a=h(),m(o,"class","count"),m(e,"title",c="Filter by "+t[10]),$(e,"active",t[3]===t[10])},m(t,c){var u,f,d,h;s(t,n,c),l(n,e),l(e,r),l(e,o),l(o,i),l(n,a),p||(f="click",d=v,(u=n).addEventListener(f,d,h),b=()=>u.removeEventListener(f,d,h),p=!0)},p(n,o){t=n,4&o&&w!==(w=t[10]+"")&&g(r,w),4&o&&y!==(y=t[11]+"")&&g(i,y),4&o&&c!==(c="Filter by "+t[10])&&m(e,"title",c),12&o&&$(e,"active",t[3]===t[10])},d(t){t&&u(n),p=!1,b()}}}function dt(t){let n,e,r;var o=t[4][t[0]];function i(t){return{props:{item:t[7],filter:t[3]}}}return o&&(n=new o(i(t))),{c(){n&&T(n.$$.fragment),e=p()},m(t,o){n&&W(n,t,o),s(t,e,o),r=!0},p(t,r){const c={};if(2&r&&(c.item=t[7]),8&r&&(c.filter=t[3]),o!==(o=t[4][t[0]])){if(n){M();const t=n;H(t.$$.fragment,1,0,()=>{D(t,1)}),S()}o?(n=new o(i(t)),T(n.$$.fragment),q(n.$$.fragment,1),W(n,e.parentNode,e)):n=null}else o&&n.$set(c)},i(t){r||(n&&q(n.$$.fragment,t),r=!0)},o(t){n&&H(n.$$.fragment,t),r=!1},d(t){t&&u(e),n&&D(n,t)}}}function ht(t){let n,e,r,o;const i=[at,ut],c=[];function l(t,n){return t[1].length>0?0:1}return e=l(t),r=c[e]=i[e](t),{c(){n=f("section"),r.c(),m(n,"class","posts")},m(t,r){s(t,n,r),c[e].m(n,null),o=!0},p(t,[o]){let s=e;e=l(t),e===s?c[e].p(t,o):(M(),H(c[s],1,1,()=>{c[s]=null}),S(),r=c[e],r||(r=c[e]=i[e](t),r.c()),q(r,1),r.m(n,null))},i(t){o||(q(r),o=!0)},o(t){H(r),o=!1},d(t){t&&u(n),c[e].d()}}}function pt(t,n,e){let r={grid:et,list:ct},{layout:o="grid"}=n,{posts:i=[]}=n,c={};for(let t of i)if("categories"in t)for(let n of t.categories)n in c||(c[n]=0),c[n]++;let l=!1;function s(t){e(3,l=l!==t&&t)}return t.$set=t=>{"layout"in t&&e(0,o=t.layout),"posts"in t&&e(1,i=t.posts)},[o,i,c,l,r,s,t=>s(t)]}class mt extends K{constructor(t){super(),J(this,t,pt,ht,c,{layout:0,posts:1})}}function gt(t){let n,e;return n=new mt({props:{posts:t[0].posts}}),{c(){T(n.$$.fragment)},m(t,r){W(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.posts=t[0].posts),n.$set(r)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){H(n.$$.fragment,t),e=!1},d(t){D(n,t)}}}function $t(t){let n,e,r=t[0].posts&&gt(t);return{c(){r&&r.c(),n=p()},m(t,o){r&&r.m(t,o),s(t,n,o),e=!0},p(t,[e]){t[0].posts?r?(r.p(t,e),1&e&&q(r,1)):(r=gt(t),r.c(),q(r,1),r.m(n.parentNode,n)):r&&(M(),H(r,1,1,()=>{r=null}),S())},i(t){e||(q(r),e=!0)},o(t){H(r),e=!1},d(t){r&&r.d(t),t&&u(n)}}}function bt(t,n,e){let r=U(),o={},i=r.subscribe(t=>{t.data&&(e(0,o=t.data),console.log(o))});var c;return c=()=>{i=null},y().$$.on_destroy.push(c),[o]}return new class extends K{constructor(t){super(),J(this,t,bt,$t,c,{})}}({target:document.getElementById("frontend")})}();
//# sourceMappingURL=bundle.js.map
