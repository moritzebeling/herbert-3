var app=function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function c(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode.removeChild(t)}function a(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d(" ")}function p(){return d("")}function g(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function m(t,n){n=""+n,t.data!==n&&(t.data=n)}function $(t,n,e){t.classList[e?"add":"remove"](n)}let b;function w(t){b=t}function y(){if(!b)throw new Error("Function called outside component initialization");return b}const v=[],x=[],_=[],E=[],j=Promise.resolve();let N=!1;function k(t){_.push(t)}let O=!1;const A=new Set;function B(){if(!O){O=!0;do{for(let t=0;t<v.length;t+=1){const n=v[t];w(n),C(n.$$)}for(v.length=0;x.length;)x.pop()();for(let t=0;t<_.length;t+=1){const n=_[t];A.has(n)||(A.add(n),n())}_.length=0}while(v.length);for(;E.length;)E.pop()();N=!1,O=!1,A.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(k)}}const F=new Set;let L;function z(){L={r:0,c:[],p:L}}function M(){L.r||r(L.c),L=L.p}function S(t,n){t&&t.i&&(F.delete(t),t.i(n))}function q(t,n,e,o){if(t&&t.o){if(F.has(t))return;F.add(t),L.c.push(()=>{F.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}function H(t){t&&t.c()}function I(t,n,o){const{fragment:i,on_mount:l,on_destroy:s,after_update:u}=t.$$;i&&i.m(n,o),k(()=>{const n=l.map(e).filter(c);s?s.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(k)}function P(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function T(t,n){-1===t.$$.dirty[0]&&(v.push(t),N||(N=!0,j.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function W(n,e,c,i,l,s,a=[-1]){const f=b;w(n);const d=e.props||{},h=n.$$={fragment:null,ctx:null,props:s,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:o(),dirty:a};let p=!1;if(h.ctx=c?c(n,d,(t,e,...o)=>{const r=o.length?o[0]:e;return h.ctx&&l(h.ctx[t],h.ctx[t]=r)&&(h.bound[t]&&h.bound[t](r),p&&T(n,t)),e}):[],h.update(),p=!0,r(h.before_update),h.fragment=!!i&&i(h.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();e.intro&&S(n.$$.fragment),I(n,e.target,e.anchor),B()}w(f)}class D{$destroy(){P(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const G=[];function J(n,e=t){let o;const r=[];function c(t){if(i(n,t)&&(n=t,o)){const t=!G.length;for(let t=0;t<r.length;t+=1){const e=r[t];e[1](),G.push(e,n)}if(t){for(let t=0;t<G.length;t+=2)G[t][0](G[t+1]);G.length=0}}}return{set:c,update:function(t){c(t(n))},subscribe:function(i,l=t){const s=[i,l];return r.push(s),1===r.length&&(o=e(c)||t),i(n),()=>{const t=r.indexOf(s);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}function K(t=function(){let t=window.location.pathname;"/"===t&&(t="home");let n=t+".json";return""!==window.location.search&&(n+=window.location.search),n}()){return{subscribe:J({},n=>(n(async function(t,n){try{console.log("fetch "+t);const e=window.location.origin+"/"+t,o=await fetch(e);if(200===o.status){const t=await o.json();return n(t),t}{const t=o.text();throw new Error(t)}}catch(t){return data.error=t,n(data),data}}(t,n)),()=>{})).subscribe}}function Q(n){let e,o,r,c;return{c(){e=f("div"),o=h(),r=f("img"),g(r,"alt",n[1]),g(r,"width",n[0]),g(r,"height",n[5]),g(r,"class","lazyload"),r.src!==(c=n[2])&&g(r,"src",c),g(r,"data-src",n[3]),g(r,"data-srcset",n[4])},m(t,c){s(t,e,c),n[8](e),s(t,o,c),s(t,r,c)},p(t,[n]){2&n&&g(r,"alt",t[1]),1&n&&g(r,"width",t[0]),32&n&&g(r,"height",t[5]),4&n&&r.src!==(c=t[2])&&g(r,"src",c),8&n&&g(r,"data-src",t[3]),16&n&&g(r,"data-srcset",t[4])},i:t,o:t,d(t){t&&u(e),n[8](null),t&&u(o),t&&u(r)}}}function R(t,n,e){let o,{alt:r="Herbert.gd"}=n,{placeholder:c=""}=n,{src:i=""}=n,{srcset:l=""}=n,{ratio:s=1}=n,{width:u="100%"}=n,a="10vw";var f;return f=()=>{e(0,u=o.offsetWidth),e(5,a=Math.floor(u*s))},y().$$.on_mount.push(f),t.$set=t=>{"alt"in t&&e(1,r=t.alt),"placeholder"in t&&e(2,c=t.placeholder),"src"in t&&e(3,i=t.src),"srcset"in t&&e(4,l=t.srcset),"ratio"in t&&e(7,s=t.ratio),"width"in t&&e(0,u=t.width)},[u,r,c,i,l,a,o,s,function(t){x[t?"unshift":"push"](()=>{o=t,e(6,o)})}]}class U extends D{constructor(t){super(),W(this,t,R,Q,i,{alt:1,placeholder:2,src:3,srcset:4,ratio:7,width:0})}}function V(t){let e,o,r;const c=[t[0].image];let i={};for(let t=0;t<c.length;t+=1)i=n(i,c[t]);return o=new U({props:i}),{c(){e=f("figure"),H(o.$$.fragment),g(e,"class","video")},m(t,n){s(t,e,n),I(o,e,null),r=!0},p(t,n){const e=1&n?function(t,n){const e={},o={},r={$$scope:1};let c=t.length;for(;c--;){const i=t[c],l=n[c];if(l){for(const t in i)t in l||(o[t]=1);for(const t in l)r[t]||(e[t]=l[t],r[t]=1);t[c]=l}else for(const t in i)r[t]=1}for(const t in o)t in e||(e[t]=void 0);return e}(c,[(r=t[0].image,"object"==typeof r&&null!==r?r:{})]):{};var r;o.$set(e)},i(t){r||(S(o.$$.fragment,t),r=!0)},o(t){q(o.$$.fragment,t),r=!1},d(t){t&&u(e),P(o)}}}function X(t){let n,e,o,r,c,i,a,p,b,w,y,v,x=t[0].title+"",_=t[0].subtitle+"",E="image"in t[0]&&V(t);return{c(){n=f("li"),e=f("a"),E&&E.c(),o=h(),r=f("div"),c=f("h3"),i=d(x),a=h(),p=f("h4"),b=d(_),g(r,"class","title"),g(e,"href",w=t[0].href),g(n,"class",y="item "+t[2]),$(n,"hide",!t[1])},m(t,u){s(t,n,u),l(n,e),E&&E.m(e,null),l(e,o),l(e,r),l(r,c),l(c,i),l(r,a),l(r,p),l(p,b),v=!0},p(t,[r]){"image"in t[0]?E?(E.p(t,r),1&r&&S(E,1)):(E=V(t),E.c(),S(E,1),E.m(e,o)):E&&(z(),q(E,1,1,()=>{E=null}),M()),(!v||1&r)&&x!==(x=t[0].title+"")&&m(i,x),(!v||1&r)&&_!==(_=t[0].subtitle+"")&&m(b,_),(!v||1&r&&w!==(w=t[0].href))&&g(e,"href",w),(!v||4&r&&y!==(y="item "+t[2]))&&g(n,"class",y),6&r&&$(n,"hide",!t[1])},i(t){v||(S(E),v=!0)},o(t){q(E),v=!1},d(t){t&&u(n),E&&E.d()}}}function Y(t,n,e){let{item:o={}}=n,{filter:r=!1}=n,c=!0;var i;i=()=>{e(1,c=!1===r||o.categories.includes(r))},y().$$.after_update.push(i);let l="";return"image"in o&&"ratio"in o.image&&(l=o.image.ratio<1?"landscape":"portrait"),t.$set=t=>{"item"in t&&e(0,o=t.item),"filter"in t&&e(3,r=t.filter)},[o,c,l,r]}class Z extends D{constructor(t){super(),W(this,t,Y,X,i,{item:0,filter:3})}}function tt(t,n,e){const o=t.slice();return o[8]=n[e],o}function nt(t,n,e){const o=t.slice();return o[11]=n[e][0],o[12]=n[e][1],o}function et(n){let e;return{c(){e=f("h3"),e.textContent="No posts found",g(e,"class","error")},m(t,n){s(t,e,n)},p:t,i:t,o:t,d(t){t&&u(e)}}}function ot(t){let n,e,o,r,c,i,d=Object.entries(t[2]),p=[];for(let n=0;n<d.length;n+=1)p[n]=rt(nt(t,d,n));let m=t[1],$=[];for(let n=0;n<m.length;n+=1)$[n]=ct(tt(t,m,n));const b=t=>q($[t],1,1,()=>{$[t]=null});return{c(){n=f("div"),e=f("ul");for(let t=0;t<p.length;t+=1)p[t].c();o=h(),r=f("ol");for(let t=0;t<$.length;t+=1)$[t].c();g(e,"class","keywords filters"),g(n,"class","result-options"),g(r,"class",c="container "+t[0])},m(t,c){s(t,n,c),l(n,e);for(let t=0;t<p.length;t+=1)p[t].m(e,null);s(t,o,c),s(t,r,c);for(let t=0;t<$.length;t+=1)$[t].m(r,null);i=!0},p(t,n){if(44&n){let o;for(d=Object.entries(t[2]),o=0;o<d.length;o+=1){const r=nt(t,d,o);p[o]?p[o].p(r,n):(p[o]=rt(r),p[o].c(),p[o].m(e,null))}for(;o<p.length;o+=1)p[o].d(1);p.length=d.length}if(26&n){let e;for(m=t[1],e=0;e<m.length;e+=1){const o=tt(t,m,e);$[e]?($[e].p(o,n),S($[e],1)):($[e]=ct(o),$[e].c(),S($[e],1),$[e].m(r,null))}for(z(),e=m.length;e<$.length;e+=1)b(e);M()}(!i||1&n&&c!==(c="container "+t[0]))&&g(r,"class",c)},i(t){if(!i){for(let t=0;t<m.length;t+=1)S($[t]);i=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)q($[t]);i=!1},d(t){t&&u(n),a(p,t),t&&u(o),t&&u(r),a($,t)}}}function rt(t){let n,e,o,r,c,i,a,p,b,w=t[11]+"",y=t[12]+"";function v(...n){return t[6](t[11],...n)}return{c(){n=f("li"),e=f("button"),o=d(w),r=f("span"),c=d(y),a=h(),g(r,"class","count"),g(e,"title",i="Filter by "+t[11]),$(n,"active",t[3]===t[11])},m(t,i){var u,f,d,h;s(t,n,i),l(n,e),l(e,o),l(e,r),l(r,c),l(n,a),p||(f="click",d=v,(u=n).addEventListener(f,d,h),b=()=>u.removeEventListener(f,d,h),p=!0)},p(r,l){t=r,4&l&&w!==(w=t[11]+"")&&m(o,w),4&l&&y!==(y=t[12]+"")&&m(c,y),4&l&&i!==(i="Filter by "+t[11])&&g(e,"title",i),12&l&&$(n,"active",t[3]===t[11])},d(t){t&&u(n),p=!1,b()}}}function ct(t){let n,e,o;var r=t[4];function c(t){return{props:{item:t[8],filter:t[3]}}}return r&&(n=new r(c(t))),{c(){n&&H(n.$$.fragment),e=p()},m(t,r){n&&I(n,t,r),s(t,e,r),o=!0},p(t,o){const i={};if(2&o&&(i.item=t[8]),8&o&&(i.filter=t[3]),r!==(r=t[4])){if(n){z();const t=n;q(t.$$.fragment,1,0,()=>{P(t,1)}),M()}r?(n=new r(c(t)),H(n.$$.fragment),S(n.$$.fragment,1),I(n,e.parentNode,e)):n=null}else r&&n.$set(i)},i(t){o||(n&&S(n.$$.fragment,t),o=!0)},o(t){n&&q(n.$$.fragment,t),o=!1},d(t){t&&u(e),n&&P(n,t)}}}function it(t){let n,e,o,r;const c=[ot,et],i=[];function l(t,n){return t[1].length>0?0:1}return e=l(t),o=i[e]=c[e](t),{c(){n=f("section"),o.c(),g(n,"class","posts")},m(t,o){s(t,n,o),i[e].m(n,null),r=!0},p(t,[r]){let s=e;e=l(t),e===s?i[e].p(t,r):(z(),q(i[s],1,1,()=>{i[s]=null}),M(),o=i[e],o||(o=i[e]=c[e](t),o.c()),S(o,1),o.m(n,null))},i(t){r||(S(o),r=!0)},o(t){q(o),r=!1},d(t){t&&u(n),i[e].d()}}}function lt(t,n,e){let o={grid:Z},{layout:r="grid"}=n,c=o[r],{posts:i=[]}=n,l={};for(let t of i)if("categories"in t)for(let n of t.categories)n in l||(l[n]=0),l[n]++;let s=!1;function u(t){e(3,s=s!==t&&t)}return t.$set=t=>{"layout"in t&&e(0,r=t.layout),"posts"in t&&e(1,i=t.posts)},[r,i,l,s,c,u,t=>u(t)]}class st extends D{constructor(t){super(),W(this,t,lt,it,i,{layout:0,posts:1})}}function ut(t){let n,e;return n=new st({props:{posts:t[0].posts}}),{c(){H(n.$$.fragment)},m(t,o){I(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.posts=t[0].posts),n.$set(o)},i(t){e||(S(n.$$.fragment,t),e=!0)},o(t){q(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function at(t){let n,e,o=t[0].posts&&ut(t);return{c(){o&&o.c(),n=p()},m(t,r){o&&o.m(t,r),s(t,n,r),e=!0},p(t,[e]){t[0].posts?o?(o.p(t,e),1&e&&S(o,1)):(o=ut(t),o.c(),S(o,1),o.m(n.parentNode,n)):o&&(z(),q(o,1,1,()=>{o=null}),M())},i(t){e||(S(o),e=!0)},o(t){q(o),e=!1},d(t){o&&o.d(t),t&&u(n)}}}function ft(t,n,e){let o=K(),r={},c=o.subscribe(t=>{t.data&&(e(0,r=t.data),console.log(r))});var i;return i=()=>{c=null},y().$$.on_destroy.push(i),[r]}return new class extends D{constructor(t){super(),W(this,t,ft,at,i,{})}}({target:document.getElementById("frontend")})}();
//# sourceMappingURL=bundle.js.map
